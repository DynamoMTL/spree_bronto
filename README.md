## SpreeBronto

Spree_bronto is one extension for Solidus to use Bronto mailing services and cart recovery tagging.
Bronto API call code is basically one copy from Wombat Bronto End_point.

This extension's older version is used in your Spree 0.11 web site.
This new spree 3.0 compatible version is brand new, please give any feedback to us: albertliu at naturalwellbeing.com

The `config/bronto.yml` file is used to configure the application to communicate with Bronto's API.
The name of the keys correspond with the names that will be used in the Solidus application.
The name of the values are the names of the Bronto messages.
The extension supports the Spree/Solidus multi-domain or multi-store model.
This is done by indenting the mailer key/values under the store name.

The following is an example of a `bronto.yml` file

```
disable_cart_recovery: false
# if this option is false, the tagkey must be present in your yaml file

handle_asynchronously: true
# if this option is true, delayed_job must be configured.

default:
   token: YOUR_BRONTO_TOKEN_TO_ACCESS_API
   from_name: EMAIL_FROM NAME
   tagkey: YOUR_BRONTO_CART_RECOVERY_KEY_IF_CART_RECOVERY_IS_ENABLED
   order_shipped: EMAIL_API_ID_FOR_ORDER_SHIPPED_NOTIFICATION
   order_received: EMAIL_API_ID_FOR_ORDER_CONFIRMATION
   new_account: EMAIL_API_ID_FOR_ACCOUNT_CREATED
   password_reset: EMAIL_API_ID_FOR_PASSWORD_RESET
   order_canceled: EMAIL_API_ID_FOR_ORDER_CANCELED
```

## Active Job

The Extension assumes that you are using ActiveJob to control background queues.
When dealing with email generation and API's this is often the most seamless method.
To begin, make sure that an [adapter and queue][1] is properly set up per environment.
From here, all order/shipping/devise(user) interactions will enqueue a new message.

## Installation

Add spree_bronto to your Gemfile:

```ruby
gem 'spree_bronto'
```

Bundle your dependencies and run the installation generator:

```shell
bundle
bundle exec rails g spree_bronto:install
```

## Testing

First bundle your dependencies, then run `rake`. `rake` will default to building the dummy app if it does not exist,
then it will run specs. The dummy app can be regenerated by using `rake test_app`.

```shell
bundle
bundle exec rake
```

When testing your applications integration with this extension you may use it's factories.
Simply add this require statement to your spec_helper:

```ruby
require 'spree_bronto/factories'
```

Copyright (c) 2015 Naturalwellbeing distribution, released under the New BSD License

[1]: http://api.rubyonrails.org/classes/ActiveJob/QueueAdapters.html
