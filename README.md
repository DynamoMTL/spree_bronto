SpreeBronto
===========

[![Solidus Ready](https://img.shields.io/badge/solidus-ready-ef8e1f.svg)](https://github.com/DynamoMTL/spree_bronto/tree/solidus)

Spree_bronto is one extension for spree to use Bronto mailing services and cart recovery tagging. Bronto API call code is basically one copy
from Wombat Bronto End_point.

This extension's older version is used in your Spree 0.11 web site.
This new spree 3.0 compatible version is brand new, please give any feedback to us: albertliu at naturalwellbeing.com


Yaml file to config your bronto acccount and email api id for order/shipment confirmation emails.
This extension support multi-domain, and can confiture at store level with identity with store code. if no store level config found, it fall to use the default

Put your own bronto.yml in your application's config folder. Its content should include following:
##################
disable_cart_recovery: false
# if this option is false, the tagkey must be present in your yaml file

handle_asynchronously: true
# if this option is true, delayed_job must be configured.

default:
   token: YOUR_BRONTO_TOKEN_TO_ACCESS_API
   from_name: EMAIL_FROM NAME
   tagkey: YOUR_BRONTO_CART_RECOVERY_KEY_IF_CART_RECOVERY_IS_ENABLED
   order_shipped: EMAIL_API_ID_FOR_ORDER_SHIPPED_NOTIFICATION
   order_received: EMAIL_API_ID_FOR_ORDER_CONFIRMATION
   new_account: EMAIL_API_ID_FOR_ACCOUNT_CREATED
   password_reset: EMAIL_API_ID_FOR_PASSWORD_RESET
   order_canceled: EMAIL_API_ID_FOR_ORDER_CANCELED
#######################


Delayed_job is supposed to handle the asynch event here.

In bronto's configuration, you need create the email templates specified in bronto.yml. You also need create two content tags with name as
SENDTIME__CONTENT1 and SENDTIME__CONTENT2 .


Installation
------------

Add spree_bronto to your Gemfile:

```ruby
gem 'spree_bronto'
```

Bundle your dependencies and run the installation generator:

```shell
bundle
bundle exec rails g spree_bronto:install
```

Testing
-------

First bundle your dependencies, then run `rake`. `rake` will default to building the dummy app if it does not exist, then it will run specs. The dummy app can be regenerated by using `rake test_app`.

```shell
bundle
bundle exec rake
```

When testing your applications integration with this extension you may use it's factories.
Simply add this require statement to your spec_helper:

```ruby
require 'spree_bronto/factories'
```

Copyright (c) 2015 Naturalwellbeing distribution, released under the New BSD License
